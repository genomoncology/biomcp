# Smithery configuration file: https://smithery.ai/docs/config#smitheryyaml

startCommand:
  type: stdio
  configSchema:
    # JSON Schema defining the configuration options for the MCP.
    type: object
    properties: {}
  commandFunction:
    # A JS function that produces the CLI command based on the given config to start the MCP on stdio.
    |-
    (config) => ({ command: 'biomcp', args: ['run'], env: {} })
  exampleConfig: {}

schemas:
  ActionType:
    type: string
    enum: ["search", "get", "predict"]
    description: "Action to perform on the resource"

  FDADomain:
    type: string
    enum: ["adverse", "label", "device", "approval", "recall", "shortage"]
    description: "FDA database domain"

  NCIResource:
    type: string
    enum: ["organization", "intervention", "biomarker", "disease"]
    description: "NCI resource type"

tools:
  # Core Tools (3)
  search:
    input:
      schema:
        type: object
        properties:
          query:
            type: string
            description: "Unified query language syntax"
          domain:
            type: string
            description: "Target domain for search"
          genes:
            type: array
            items:
              type: string
            description: "Gene symbols"
          diseases:
            type: array
            items:
              type: string
            description: "Disease/condition terms"
          page:
            type: integer
            default: 1
          page_size:
            type: integer
            default: 10

  fetch:
    input:
      schema:
        type: object
        properties:
          id:
            type: string
            description: "Record identifier"
          domain:
            type: string
            description: "Domain (auto-detected if not provided)"
          detail:
            type: string
            description: "Specific section for trials"
        required: ["id"]

  think:
    input:
      schema:
        type: object
        properties:
          thought:
            type: string
            description: "Current reasoning step"
          thoughtNumber:
            type: integer
            description: "Sequential thought number"
          totalThoughts:
            type: integer
            description: "Estimated total thoughts"
          nextThoughtNeeded:
            type: boolean
            default: true
        required: ["thought", "thoughtNumber"]

  # Domain Tools (4)
  article:
    input:
      schema:
        type: object
        properties:
          action:
            $ref: "#/schemas/ActionType"
          genes:
            type: array
            items:
              type: string
          diseases:
            type: array
            items:
              type: string
          chemicals:
            type: array
            items:
              type: string
          keywords:
            type: array
            items:
              type: string
          variants:
            type: array
            items:
              type: string
          include_preprints:
            type: boolean
            default: true
          include_cbioportal:
            type: boolean
            default: true
          id:
            type: string
            description: "Article ID for get action (PMID, PMC ID, or DOI)"
          page:
            type: integer
            default: 1
          page_size:
            type: integer
            default: 10
        required: ["action"]

  trial:
    input:
      schema:
        type: object
        properties:
          action:
            $ref: "#/schemas/ActionType"
          conditions:
            type: array
            items:
              type: string
          interventions:
            type: array
            items:
              type: string
          other_terms:
            type: array
            items:
              type: string
          recruiting_status:
            type: string
            default: "ANY"
          phase:
            type: string
          lat:
            type: number
          long:
            type: number
          distance:
            type: integer
          age_group:
            type: string
          sex:
            type: string
          study_type:
            type: string
          funder_type:
            type: string
          id:
            type: string
            description: "NCT ID for get action"
          detail:
            type: string
            description: "Specific trial section (protocol, locations, outcomes, references, all)"
          page:
            type: integer
            default: 1
          page_size:
            type: integer
            default: 10
        required: ["action"]

  variant:
    input:
      schema:
        type: object
        properties:
          action:
            $ref: "#/schemas/ActionType"
          gene:
            type: string
          hgvs:
            type: string
            description: "General HGVS notation"
          hgvsp:
            type: string
            description: "Protein HGVS"
          hgvsc:
            type: string
            description: "Coding DNA HGVS"
          rsid:
            type: string
          region:
            type: string
          significance:
            type: string
          frequency_min:
            type: number
          frequency_max:
            type: number
          cadd_score_min:
            type: number
          sift_prediction:
            type: string
          polyphen_prediction:
            type: string
          include_cbioportal:
            type: boolean
            default: true
          include_oncokb:
            type: boolean
            default: true
          variant_id:
            type: string
            description: "Variant ID for get action"
          include_external:
            type: boolean
            default: true
          page:
            type: integer
            default: 1
          page_size:
            type: integer
            default: 10
        required: ["action"]

  alphagenome:
    input:
      schema:
        type: object
        properties:
          action:
            type: string
            enum: ["predict"]
          chromosome:
            type: string
            description: "Chromosome (e.g., chr7)"
          position:
            type: integer
            description: "1-based position"
          reference:
            type: string
            description: "Reference allele"
          alternate:
            type: string
            description: "Alternate allele"
          interval_size:
            type: integer
            default: 131072
          tissue_types:
            type: array
            items:
              type: string
            description: "UBERON tissue terms"
          significance_threshold:
            type: number
            default: 0.5
          api_key:
            type: string
        required: ["action", "chromosome", "position", "reference", "alternate"]

  # BioThings Tools (3)
  gene:
    input:
      schema:
        type: object
        properties:
          action:
            type: string
            enum: ["get"]
          id:
            type: string
            description: "Gene symbol or Entrez ID"
        required: ["action", "id"]

  disease:
    input:
      schema:
        type: object
        properties:
          action:
            type: string
            enum: ["get"]
          id:
            type: string
            description: "Disease name or ontology ID"
        required: ["action", "id"]

  drug:
    input:
      schema:
        type: object
        properties:
          action:
            type: string
            enum: ["get"]
          id:
            type: string
            description: "Drug name or database ID"
        required: ["action", "id"]

  # Specialized Tools (2)
  fda:
    input:
      schema:
        type: object
        properties:
          domain:
            $ref: "#/schemas/FDADomain"
          action:
            $ref: "#/schemas/ActionType"
          drug:
            type: string
          reaction:
            type: string
          serious:
            type: boolean
          indication:
            type: string
          boxed_warning:
            type: boolean
            default: false
          section:
            type: string
          device:
            type: string
          manufacturer:
            type: string
          problem:
            type: string
          product_code:
            type: string
          genomics_only:
            type: boolean
            default: true
          application_number:
            type: string
          approval_year:
            type: string
          recall_class:
            type: string
          status:
            type: string
          reason:
            type: string
          since_date:
            type: string
          therapeutic_category:
            type: string
          id:
            type: string
            description: "Record ID for get action"
          sections:
            type: array
            items:
              type: string
            description: "Specific label sections"
          limit:
            type: integer
            default: 25
          page:
            type: integer
            default: 1
          api_key:
            type: string
        required: ["domain", "action"]

  nci:
    input:
      schema:
        type: object
        properties:
          resource:
            $ref: "#/schemas/NCIResource"
          action:
            $ref: "#/schemas/ActionType"
          name:
            type: string
          organization_type:
            type: string
          city:
            type: string
          state:
            type: string
          intervention_type:
            type: string
          synonyms:
            type: boolean
            default: true
          biomarker_type:
            type: string
          include_synonyms:
            type: boolean
            default: true
          category:
            type: string
          id:
            type: string
            description: "Resource ID for get action"
          page_size:
            type: integer
            default: 20
          page:
            type: integer
            default: 1
          api_key:
            type: string
        required: ["resource", "action"]
